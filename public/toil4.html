<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Toilsome</title>
  <!-- styles omitted for brevity (same as before) -->
</head>
<body>
  <!-- header, hero, features… same as before -->

  <section id="assessment" class="assessment-section">
    <div class="container">
      <h2>Task Assessment</h2>
      <div class="assessment-form">
        <!-- form fields -->
        <button id="analyze-button" class="submit-button">Get AI Analysis</button>
        <div id="loading" class="loading-state">
          <div class="spinner"></div>
          <span>Analyzing...</span>
        </div>
        <div id="results" class="results-section">
          <h3>Your Automation Analysis</h3>
          <div id="results-content" class="results-content"></div>
        </div>
      </div>
    </div>
  </section>

  <section id="roadmap" class="roadmap-section" style="display:none">
    <div class="container">
      <h2>30-Day Roadmap</h2>
      <div class="roadmap-form">
        <!-- roadmap form fields -->
        <button id="generate-roadmap" class="submit-button">Generate My Roadmap</button>
        <div id="roadmap-loading" class="loading-state">
          <div class="spinner"></div>
          <span>Generating roadmap...</span>
        </div>
        <div id="roadmap-results" class="roadmap-results">
          <h3>Your Implementation Roadmap</h3>
          <div id="roadmap-content" class="roadmap-timeline"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- footer, modals… same as before -->

  <script>
    // Analyze
    async function analyzeTask() {
      const btn = document.getElementById('analyze-button'),
            load = document.getElementById('loading'),
            resEl = document.getElementById('results'),
            out = document.getElementById('results-content');

      const industry = document.getElementById('industry').value,
            task     = document.getElementById('task-description').value,
            timeSpent= document.getElementById('time-spent').value,
            currentTools = document.getElementById('current-tools').value;

      if (!industry||!task||!timeSpent) return alert('Fill all fields');
      btn.disabled = true; load.style.display='flex'; resEl.style.display='none';

      try {
        const resp = await fetch('/api/analyze', {
          method:'POST',
          headers:{ 'Content-Type':'application/json' },
          body: JSON.stringify({ industry, task, timeSpent, currentTools })
        });
        const { analysis, error } = await resp.json();
        if (error) throw new Error(error);
        out.innerHTML = analysis;
        resEl.style.display = 'block';
      } catch (e) {
        alert('Error: ' + e.message);
      } finally {
        btn.disabled = false; load.style.display='none';
      }
    }

    // Roadmap
    async function generateRoadmap() {
      const btn = document.getElementById('generate-roadmap'),
            load = document.getElementById('roadmap-loading'),
            resEl = document.getElementById('roadmap-results'),
            out = document.getElementById('roadmap-content');

      const priority = document.getElementById('roadmap-priority').value,
            skill    = document.getElementById('roadmap-skill').value,
            budget   = document.getElementById('roadmap-budget').value,
            time     = document.getElementById('roadmap-time').value;

      if (!priority||!skill||!budget||!time) return alert('Complete all fields');
      btn.disabled = true; load.style.display='flex'; resEl.style.display='none';

      try {
        const resp = await fetch('/api/roadmap', {
          method:'POST',
          headers:{ 'Content-Type':'application/json' },
          body: JSON.stringify({ priority, skill, budget, time })
        });
        const { roadmap, error } = await resp.json();
        if (error) throw new Error(error);
        // Build timeline items
        let html = '';
        Object.values(roadmap).forEach((week, i) => {
          html += `
            <div class="timeline-item">
              <div class="timeline-number">${i+1}</div>
              <div class="timeline-content">
                <h4>${week.title}</h4>
                <p>${week.description}</p>
                <ul>${week.tasks.map(t=>`<li>${t}</li>`).join('')}</ul>
                <span class="priority-badge priority-${week.priority}">${week.priority.toUpperCase()}</span>
              </div>
            </div>`;
        });
        out.innerHTML = html;
        resEl.style.display = 'block';
      } catch (e) {
        alert('Error: ' + e.message);
      } finally {
        btn.disabled = false; load.style.display='none';
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('analyze-button')
              .addEventListener('click', analyzeTask);
      document.getElementById('generate-roadmap')
              .addEventListener('click', generateRoadmap);
    });
  </script>
</body>
</html>
